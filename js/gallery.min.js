function Gallery(t,e,h){var g=t,i=e,o=[],w={width:900,target_row_height:240,max_row_height:240,margin:15,img_path:""};for(key in h)w[key]=h[key];function r(t,e,h){var r=[],a=e,n=t,g=h,o=0,w=0,i=!1;this.Add=function(t,e,h){var i=Math.ceil(e/(h/a));return(o+i+g*(w+0)<n||(i+g)/2<n-o-g*(w+0))&&(r.push([t,e,h]),w++,o+=i,!0)},this.numbrOfImage=function(){return w},this.height=function(){var t=(n-g*(w-1))/o;return 1<t&&i?a:Math.round(a*t)},this.getImage=function(t){return r[t]},this.setLastRowFlag=function(){i=!0}}function a(){o=[];for(var t=new r(w.width,w.target_row_height,w.margin),e=i.length,h=0;h<e;){i[h][1],i[h][2];t.Add(i[h][0],i[h][1],i[h][2])?h++:(o.push(t),t=new r(w.width,w.target_row_height,w.margin))}0<t.numbrOfImage()&&(t.setLastRowFlag(),o.push(t)),_numOfPages=Math.ceil(o.length/w.rows_per_page),function(){o.length;var t=o.length;g.empty();for(var e=0;e<t;e++){var h=o[e],i=$("<div/>");i.height(h.height()).addClass("row");for(var r=0;r<h.numbrOfImage();r++){var a=$("<A target='blank'/>").attr("href",w.img_path+h.getImage(r)[0]),n=$("<img/>").attr("src",w.img_path+h.getImage(r)[0]);n.attr("height",h.height()),a.append(n),i.append(a)}g.append(i)}}()}w.width=w.width,w.target_row_height=.6*w.width,240<w.target_row_height&&(w.target_row_height=240),w.max_row_height=w.width,300<w.max_row_height&&(w.max_row_height=300),a(),this.Resize=function(t){w.width=t,a()}}$(function(){$(document).ready(function(){_gallery=new Gallery($(".album"),FILE_LIST,{width:$(".album").width(),img_path:"../portfolio/"})}),$(window).resize(function(){_gallery.Resize($(".album").width())})});