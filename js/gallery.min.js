function Gallery(t,e,h){var g=t,r=e,o=[],_={width:900,target_row_height:240,max_row_height:240,margin:15,img_path:""};for(key in h)_[key]=h[key];function a(t,e,h){var a=[],i=e,n=t,g=h,o=0,_=0,r=!1;this.Add=function(t,e,h){var r=Math.ceil(e/(h/i));return(o+r+g*(_+0)<n||(r+g)/2<n-o-g*(_+0))&&(a.push([t,e,h]),_++,o+=r,!0)},this.numbrOfImage=function(){return _},this.height=function(){var t=(n-g*(_-1))/o;return 1<t&&r?i:Math.round(i*t)},this.getImage=function(t){return a[t]},this.setLastRowFlag=function(){r=!0}}function i(){o=[];for(var t=new a(_.width,_.target_row_height,_.margin),e=r.length,h=0;h<e;){r[h][1],r[h][2];t.Add(r[h][0],r[h][1],r[h][2])?h++:(o.push(t),t=new a(_.width,_.target_row_height,_.margin))}0<t.numbrOfImage()&&(t.setLastRowFlag(),o.push(t)),_numOfPages=Math.ceil(o.length/_.rows_per_page),function(){o.length;var t=o.length;g.empty();for(var e=0;e<t;e++){var h=o[e],r=$("<div/>");r.height(h.height()).addClass("row");for(var a=0;a<h.numbrOfImage();a++){var i=$("<A target='blank'/>").attr("href",_.img_path+h.getImage(a)[0]),n=$("<img/>").attr("src",_.img_path+h.getImage(a)[0]);n.attr("height",h.height()),i.append(n),r.append(i)}g.append(r)}}()}_.width=_.width,_.target_row_height=.6*_.width,240<_.target_row_height&&(_.target_row_height=240),_.max_row_height=_.width,300<_.max_row_height&&(_.max_row_height=300),i(),this.Resize=function(t){_.width=t,i()}}$(function(){$(document).ready(function(){_gallery=new Gallery($(".album"),FILE_LIST,{width:$(".album").width(),img_path:"../portfolio/"})})});