function Gallery(t,e,a){var g=t,i=e,o=[],u={width:900,target_row_height:240,max_row_height:240,margin:20,img_path:""};for(key in a)u[key]=a[key];function r(t,e,a){var r=[],n=e,h=t,g=a,o=0,u=0,i=!1;this.Add=function(t,e,a){var i=Math.ceil(e/(a/n));return(o+i+g*(u+1)<h||(i+g)/2<h-o-g*(u+1))&&(r.push([t,e,a]),u++,o+=i,!0)},this.numbrOfImage=function(){return u},this.height=function(){var t=(h-g*(u+1))/o;return 1<t&&i?n:Math.round(n*t)},this.getImage=function(t){return r[t]},this.setLastRowFlag=function(){i=!0}}function n(){o=[];for(var t=new r(u.width,u.target_row_height,u.margin),e=i.length,a=0;a<e;){i[a][1],i[a][2];t.Add(i[a][0],i[a][1],i[a][2])?a++:(o.push(t),t=new r(u.width,u.target_row_height,u.margin))}0<t.numbrOfImage()&&(t.setLastRowFlag(),o.push(t)),_numOfPages=Math.ceil(o.length/u.rows_per_page),function(){o.length;var t=o.length;g.empty();for(var e=0;e<t;e++){var a=o[e],i=$("<div/>");i.height(a.height()).addClass("row");for(var r=0;r<a.numbrOfImage();r++){var n=$("<A target='blank'/>").attr("href",u.img_path+a.getImage(r)[0]),h=$("<img/>").attr("src",u.img_path+a.getImage(r)[0]);h.attr("height",a.height()),n.append(h),i.append(n)}g.append(i)}}()}n(),this.Resize=function(t){u.width=t,n()}}$(function(){var t;console.log("gallery"),$(document).ready(function(){t=new Album($(".album"),FILE_LIST,{width:$(".album").width(),target_row_height:360,max_row_height:360,img_path:"portifilo/"})}),$(window).resize(function(){t.Resize($(".album").width())})});